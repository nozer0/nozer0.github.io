<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>How to use Git</title>
	<!-- <meta name="keywords" content=""> -->
	<meta name="description" content="A note about how to use Git, which can be taken as a simple mannual.">
	<meta name="author" content="nozer0">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="robots" content="all">

	<link rel="stylesheet" type="text/css" href="/assets/default/css/style.css">

	<!-- atom & rss feed
	<link href="" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
	<link href="" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
	-->

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>
	
	

	<header class="navbar">
	<a class="brand" href="/">
		nozer0's blog
		<div class="tagline">Life may has Zero, but thought never</div>
	</a>
	
		<a href="/zh/">Chinese</a>
	
	<nav>
		
			
		
			
				
      				<a href="/en/archive/">Archive</a>
      			
      		
		
			
				
      				<a href="/en/categories/">Categories</a>
      			
      		
		
			
		
			
				
      				<a href="/en/tags/">Tags</a>
      			
      		
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</nav>
</header>
	<aside></aside>
	


<article class="post">
	
	
	<nav>
	
		&raquo;
		
			<a href="/en/categories">Categories</a>
		
	
		&raquo;
		
			<a href="/en/categories/#program">program</a>
		
	
	</nav>
	

	<h1>
		How to use Git
		
			
		
		
			<a href=/zh/program/how-to-use-git/>&</a>
		
			
		
			
		
	</h1>

	<div>
		<span class="date">2014-03-04</span>
		by <a href="mailto:c.nozer0@gmail.com">nozer0</a>
	</div>
	<div class="content"><p>Here are some notes I’d like to share about using Git, let’s start.</p>

<p>The index as cheetsheet:</p>

<ul>
<li>
<p><a href="#launch_"><code>git clone &lt;repository path&gt;</code> -&gt; First, we need to get data from remote repository.</a></p>
</li>

<li>
<p><a href="#working_cycle_">How to do changes with the repository.</a></p>

<ol>
<li><a href="#update"><code>git fetch</code> -&gt; Get data from remote repository to local repository.</a></li>

<li><a href="#update"><code>git checkout</code> -&gt; Checkout data from local repository to working tree.</a></li>

<li><a href="#change"><code>git add &lt;new files&gt;</code> -&gt; Add files to version control.</a></li>

<li><a href="#revert"><code>git reset</code> -&gt; Revert the changes uncommitted.</a></li>

<li><a href="#commit"><code>git commit</code> -&gt; Commit the change to local repository.</a></li>

<li><a href="#commit"><code>git push</code> -&gt; Synchronise the commits from local repository to remote.</a></li>
</ol>
</li>

<li>
<p><a href="#branch_">Branch</a></p>

<ol>
<li><code>git branch &lt;name&gt; &lt;commit&gt;</code> -&gt; Create branches.</li>

<li><code>git merge &lt;name&gt;</code> -&gt; Merge changes from branch indicates by ‘name’.</li>

<li><code>git cherry-pick &lt;commit&gt;</code> -&gt; Choose to duplicate specified commits.</li>

<li><code>git rebase &lt;src&gt; &lt;dest&gt;</code> -&gt; Duplicate the commits from ‘dest’ to ‘src’.</li>

<li><code>git branch -d &lt;name&gt;</code> -&gt; Remove unused branch.</li>

<li><code>git checkout &lt;name&gt;</code> -&gt; Switch to another branch.</li>
</ol>
</li>

<li>
<p><a href="#tag_">Tag</a></p>
</li>

<li>
<p><a href="#auxiliary_commands_"><code>git status</code>, <code>git diff</code>, … -&gt; Auxiliary Commands to help us check version info.</a></p>
</li>

<li>
<p><a href="#additional_info_">Additional info</a></p>
</li>

<li>
<p><a href="#compare_table">Comparing table with SVN</a></p>
</li>
</ul>
<hr />
<h1 id="install_">Install <a href="#">↑</a></h1>

<p>The most simple way to install Git is to download the installer file directly from <a href="http://git-scm.com/downloads">official site</a>.</p>

<p>Or we can also choose to use some package manage tools that help us to do this job, such as ‘apt-get’ on Debian, or ‘port’ and ‘brew’ on OSX. Ensure that we already install the depending packages (curl, zlib, openssl, expat, and libiconv) before running.</p>

<pre><code># for ubuntu
apt-get install git
# for mac
brew install git</code></pre>

<p>For the users who already installed Git before, try this to get latest one.</p>

<pre><code>git clone git://git.kernel.org/pub/scm/git/git.git</code></pre>
<hr />
<h1 id="setup_">Setup <a href="#">↑</a></h1>

<p>Set some configurations before we start to use Git.</p>

<pre><code># replace &#39;nozer0&#39; and &#39;c.nozer0@gmail.com&#39; to what you use
git config --global user.name nozer0
git config --global user.email c.nozer0@gmail.com</code></pre>

<p>Or change all configurations using editor at one time.</p>

<pre><code>git config --global -e</code></pre>
<hr />
<h1 id="launch_">Launch <a href="#">↑</a></h1>

<p>Usually we need to get codes from existing remote repository first. This operation is mostly like the <code>checkout</code> operation of other VCS such as CVS or Subversion.</p>

<pre><code># copying files from repository
git clone https://github.com/nozer0/one-piece.git
git clone /usr/local/codes/one-piece ./op

# use `-b` option if want to use branch instead of HEAD
git clone -b branch1 https://github.com/nozer0/one-piece.git</code></pre>

<p>Or, we can also choose to init a local directory as working area first, then set remote url to be connected.</p>

<pre><code># create &#39;.git&#39; directory contains all repository info needed.
git init
git remote add origin https://github.com/nozer0/one-piece.git</code></pre>
<hr />
<h1 id="working_cycle_">Working Cycle <a href="#">↑</a></h1>

<p>Since Git is DVCS(Distributed control version system), it has a local repository and one more place to store info of files which are tracked but uncommitted, called ‘index’ or ‘staged’ area, correspondingly, the new created or modified files out of version control are named as ‘unstaged’ files.</p>

<pre><code>+---------+   add   +-------+  commit  +------------+  push   +------------+
| Working | ------&gt; | Index | -------&gt; |   Local    | ------&gt; |   Remote   |
|  Area   | &lt;------ | Area  |          | Repository | &lt;------ | Repository |
+---------+  reset  +-------+          +------------+  fetch  +------------+
     ^                  ^      checkout       |
     +------------------+---------------------+</code></pre>

<h2 id="update">Update</h2>

<p>First, we need ‘update’ latest data from remote repository to working area.</p>

<p>Use <code>git fetch</code> command to synchronize the data from remote repository to local repository.</p>

<pre><code>git fetch
# fetch &#39;origin/master~2&#39; commit from remote to local &#39;foo&#39; branch
git fetch origin master~2:foo</code></pre>

<p>After that, we can choose to merge or rebase the remote changes or checkout directly. For more details, please check the next <a href="#branch_">Branch</a> section.</p>

<pre><code># do merge work if some local changes
git merge origin/master
# or apply the remote data to working area
git checkout origin/master</code></pre>

<p>Git also has a shorthand command <code>git pull</code> to update the data from remote repository to working tree in one go.</p>

<pre><code># shorthand one for `git fetch` and `git merge FETCH_HEAD`
git pull
# or choose &#39;rebase&#39; instead of &#39;merge&#39;
git pull --rebase
# also support the complex format like `fetch`
git pull origin foo:bar</code></pre>

<h2 id="change">Change</h2>

<p>OK, now we start to do some changes in working area to index by using <code>git add</code> or other commands.</p>

<pre><code># try `git status` before and after this command to see the difference
# edit
git status
git add test.txt
git status

# affect index only
git rm old.txt --cached
# remove from index and working tree both
git rm unused.txt

# rename files
git mv old.c new.c
# equivalent one
mv old.c new.c
git rm old.c
git add new.c</code></pre>

<h2 id="revert">Revert</h2>

<p>Sometimes, we may mistake to commit something, or we want to revert the recent changes, here are some commands satisify the purpose.</p>

<pre><code># revert change on index only, and keep in working directory
git reset text.txt
# reset to 2 commits before
git reset HEAD~2
# equivalent one if in &#39;master&#39; branch
git branch -f master HEAD~2

# or revert change on both index and working area
git reset --hard</code></pre>

<h2 id="commit">Commit</h2>

<p>Since there are more areas in Git than other VCS, we need to one more step to do this job instead of single ‘commit’ operation.</p>

<p>After all files are staged, we can commit the changes to our local repository, yes, use <code>git commit</code> like normal.</p>

<pre><code>git commit -m &#39;first commit&#39;
# if the files are staged before, we can merge `add` and `commit` steps into one go
git commit -am &#39;commit again&#39; test.txt</code></pre>

<p>Especially, if we want to change last commit, this is always happened when finding some changes forgot to give or files forgot to add after commit.</p>

<pre><code>git commit --amend</code></pre>

<p>One thing to be noticed here, if the file has tracked once, it will commit with the newest one in working area instead of staged area, for example.</p>

<pre><code>echo 1 &gt; test
git add test
echo 2 &gt;&gt; test
# the actual commit file content is &#39;1 2&#39;
git commit test -m &#39;test file&#39;</code></pre>

<p>And after some commits done in local repository, that we want to apply these changes to remote, we use <code>git push</code>.</p>

<pre><code>git push
# push &#39;HEAD~2&#39; commit to the remote &#39;origin/foo&#39; branch
git push origin HEAD~2:foo</code></pre>
<hr />
<h1 id="branch_">Branch <a href="#">↑</a></h1>

<p>Branch is just reference points to commit in Git, so it is used more frequently than others, as always said, ‘branch early, and branch often’. We create new branches for developing new feature, bug fixing, or some other things.</p>

<pre><code># show all branches
git branch -a
# create a branch named &#39;new&#39; on HEAD~2
git branch new HEAD~2
# rename branch
git branch -m new branch1
# move branch1 pointing to commit &#39;afe9...&#39;
git branch -f branch1 afe9
# delete unused branch
git branch -d branch1</code></pre>

<p>Since we always have some branches in practise, we need to switch between them via <code>git checkout</code> command.</p>

<pre><code># switch to the branch and set HEAD and index based on that branch
git checkout master
# create a new branch and switch to it in one go
git checkout -b branch2 HEAD~2
# or merge move and checkout branch operations into one
git checkout -B master branch2</code></pre>

<p>Here are several ways to rearrange the branches if necessary, <code>merge</code>, <code>rebase</code> or <code>cherry-pick</code>, let’s see some examples to compare the difference.</p>

<pre><code># C0--C1 &lt;- master*
#  \
#  C2--C3 &lt;- develop

git merge develop
# C0--C1--C4 &lt;- master*
#  \     /
#  C2--C3 &lt;- develop
# if conflicts happen between merging, we can choose to reset status before merge
git merge --abort

git rebase master develop
#      C2&#39;--C3&#39; &lt;- develop*
#      /
# C0--C1 &lt;- master
#  \
#  C2--C3
# we can also implement this on interative mode with `-i` option

git cherry-pick C2 C3
# C0--C1--C2&#39;--C3&#39; &lt;- master*
#  \
#  C2--C3 &lt;- develop</code></pre>
<hr />
<h1 id="tag_">Tag <a href="#">↑</a></h1>

<p>Tag is another type of reference to commit, usually used for milestone mark or something else, which is very similiar as ‘Branch’.</p>

<pre><code># show all tags
git tag -a
# create a tag named &#39;v1.0&#39; on HEAD~2
git tag v1.0 HEAD~2
# tag again if references to wrong commit
git tag -f v1.0 HEAD
# delete tag
git tag -d v1.0-test</code></pre>
<hr />
<h1 id="auxiliary_commands_">Auxiliary Commands <a href="#">↑</a></h1>

<p>We already use the <code>git status</code> before, and <code>git log</code> can give us more detail history info.</p>

<pre><code>git log
# show detail diff info
git log -p
# show statistics diff info
git log --stat
# show latest &lt;n&gt; log
git log -2
# show log based on conditions
git log --since=&lt;time&gt;</code></pre>

<p>And we can also get the difference between 2 states by running <code>git diff</code>.</p>

<pre><code># compare between index and working area
git diff
# compare between commit and index
git diff --cached
# compare between HEAD and working area
git diff HEAD</code></pre>

<p><code>git show</code> and <code>git blame</code> can let us check more detail info if need.</p>

<pre><code>git show 4c18
# more interesting, this can show commit change info for each line
git blame readme.txt
# output:
# 	^4c18e3c (nozer0 2014-03-05 14:17:44 +0800  1) hi
# 	^4c18e3c (nozer0 2014-03-05 14:17:44 +0800  1) I&#39;m nozer0</code></pre>
<hr />
<h1 id="additional_info_">Additional info <a href="#">↑</a></h1>

<p>‘Commit’, is the most important concept in Git, and there are many places we need to specify the detail commit id to be used in commands, Git provides several choices for us. Assume we have such commit tree.</p>

<pre><code>   v1 (tag)
      |
+-----------+     +-----------+
| a9e82f... | --- | 39e768... | &lt;- master* (branch)
+-----------+     +-----------+
               /
+-----------+
| 36bc54... |
+-----------+</code></pre>

<p>Git also have the same predefined keyword ‘HEAD’, different than other VCS like SVN, it indicates the current relevant commit working with. For the situation above, ‘HEAD’ is equivlant to ‘master’. So, If we want to assign with ‘a9e82f…’ commit, we can use one of ‘a9e8’, ‘v1’, ‘master~’ and ‘HEAD^’, and ‘36bc..’, ‘master^2’ for ‘36bc54…’ commit. And the difference between ‘~’ and ‘^’ is, ‘~’ shows the step goes backwards, and ‘^’ shows which path goes, we can also combine these two, like, ‘HEAD^2~3’.</p>

<h2 id="compare_table">Compare Table</h2>

<p>As extra candy for the one who used SVN before, this is the compare table, which lists similiar commands between SVN and Git.</p>
<table><thead><tr><th>SVN</th><th>Git</th></tr></thead><tbody><tr><td style="text-align: right;"><code>svn checkout</code></td><td style="text-align: left;"><code>git clone</code></td></tr>
<tr><td style="text-align: right;"></td><td style="text-align: left;"></td></tr>
<tr><td style="text-align: right;"><code>svn update</code></td><td style="text-align: left;"><code>git pull</code>, <code>git fetch</code> + <code>git checkout</code></td></tr>
<tr><td style="text-align: right;"><code>svn add</code></td><td style="text-align: left;"><code>git add</code></td></tr>
<tr><td style="text-align: right;"><code>svn move</code></td><td style="text-align: left;"><code>git move</code></td></tr>
<tr><td style="text-align: right;"><code>svn revert</code></td><td style="text-align: left;"><code>git reset --hard</code></td></tr>
<tr><td style="text-align: right;"><code>svn commit</code></td><td style="text-align: left;"><code>git commit</code> + <code>git push</code></td></tr>
<tr><td style="text-align: right;"></td><td style="text-align: left;"></td></tr>
<tr><td style="text-align: right;"><code>svn status</code></td><td style="text-align: left;"><code>git status</code></td></tr>
<tr><td style="text-align: right;"><code>svn diff</code></td><td style="text-align: left;"><code>git diff</code></td></tr>
<tr><td style="text-align: right;"><code>svn log</code></td><td style="text-align: left;"><code>git log</code></td></tr>
<tr><td style="text-align: right;"></td><td style="text-align: left;"></td></tr>
<tr><td style="text-align: right;"><code>svn copy &lt;src&gt; &lt;branch path&gt;</code></td><td style="text-align: left;"><code>git branch &lt;branch name&gt; &lt;commit&gt;</code></td></tr>
<tr><td style="text-align: right;"><code>svn rm &lt;branch path&gt;</code></td><td style="text-align: left;"><code>git branch -d &lt;branch name&gt;</code></td></tr>
<tr><td style="text-align: right;"><code>svn merge &lt;path&gt;</code></td><td style="text-align: left;"><code>git merge &lt;name&gt;</code></td></tr>
<tr><td style="text-align: right;"><code>svn merge -r&lt;rev&gt; &lt;path&gt;</code></td><td style="text-align: left;"><code>git cherry-pick &lt;commit&gt;</code></td></tr>
</tbody></table><hr />
<p>Here is very interesting study <a href="http://pcottle.github.io/learnGitBranching/">site</a> with interactive visualize graphic case.</p></div>

	
	
	


<div class="tags_box">

	<a href="/en/tags/#VCS">VCS <small>2</small></a>

	<a href="/en/tags/#Git">Git <small>1</small></a>

	<a href="/en/tags/#note">note <small>2</small></a>

</div>
	

	<hr>
	<div class="pagination">
	
	
		
	
		
			
				
				
				<a class="prev" href="/en/program/how-to-use-svn/" title="How to use SVN">&larr; How to use SVN</a>
			

			
				<a class="next disabled">&rarr; Next</a>
			
		
	
	</div>
</article>
	<footer>
	&copy; 2014 ~ <br>
	<a href="mailto:c.nozer0@gmail.com">nozer0</a>
</footer>
</body>
</html>